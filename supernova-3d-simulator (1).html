<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Supernova Explosion Simulator</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: #0a0e27;
            color: #fff;
            overflow-x: hidden;
        }

        .header {
            text-align: center;
            padding: 40px 20px 30px;
            background: rgba(0, 0, 0, 0.5);
        }

        .header h1 {
            font-size: 2.5em;
            font-weight: 700;
            color: #ff6b6b;
            margin-bottom: 10px;
        }

        .header p {
            font-size: 1.1em;
            color: #feca57;
        }

        #canvas-container {
            width: 100%;
            height: 500px;
            background: #000;
            position: relative;
        }

        .controls-section {
            max-width: 1400px;
            margin: 0 auto;
            padding: 30px 20px;
            display: grid;
            grid-template-columns: 1fr 2fr 1fr;
            gap: 30px;
            align-items: start;
        }

        .control-panel {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 107, 107, 0.3);
            border-radius: 15px;
            padding: 25px;
        }

        .control-panel h3 {
            color: #ff6b6b;
            margin-bottom: 20px;
            font-size: 1.3em;
            text-align: center;
            border-bottom: 2px solid rgba(255, 107, 107, 0.3);
            padding-bottom: 10px;
        }

        .control-btn {
            width: 100%;
            padding: 12px;
            margin: 10px 0;
            border: none;
            border-radius: 8px;
            font-size: 1em;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .btn-start {
            background: #ff6b6b;
            color: white;
        }

        .btn-start:hover {
            background: #ff5252;
            transform: translateY(-2px);
        }

        .btn-pause {
            background: #48dbfb;
            color: white;
        }

        .btn-pause:hover {
            background: #0abde3;
            transform: translateY(-2px);
        }

        .btn-reset {
            background: #feca57;
            color: #000;
        }

        .btn-reset:hover {
            background: #f8b500;
            transform: translateY(-2px);
        }

        .speed-control {
            margin: 20px 0;
        }

        .speed-control label {
            display: block;
            margin-bottom: 10px;
            color: #feca57;
            font-weight: 600;
        }

        .speed-control input[type="range"] {
            width: 100%;
        }

        .speed-value {
            text-align: center;
            color: #fff;
            font-size: 1.1em;
            margin-top: 8px;
        }

        .stage-indicator {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(254, 202, 87, 0.3);
            border-radius: 15px;
            padding: 25px;
        }

        .stage-indicator h3 {
            color: #feca57;
            margin-bottom: 15px;
            font-size: 1.3em;
            text-align: center;
            border-bottom: 2px solid rgba(254, 202, 87, 0.3);
            padding-bottom: 10px;
        }

        .current-stage {
            background: rgba(254, 202, 87, 0.1);
            padding: 15px;
            border-radius: 8px;
            text-align: center;
            font-size: 1.1em;
            font-weight: 600;
            color: #feca57;
            margin-bottom: 15px;
        }

        .stage-description {
            color: #ccc;
            line-height: 1.6;
            font-size: 0.95em;
        }

        .stats-panel {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(72, 219, 251, 0.3);
            border-radius: 15px;
            padding: 25px;
        }

        .stats-panel h3 {
            color: #48dbfb;
            margin-bottom: 20px;
            font-size: 1.3em;
            text-align: center;
            border-bottom: 2px solid rgba(72, 219, 251, 0.3);
            padding-bottom: 10px;
        }

        .stat-row {
            display: flex;
            justify-content: space-between;
            margin: 15px 0;
            padding: 12px;
            background: rgba(255, 255, 255, 0.03);
            border-radius: 8px;
        }

        .stat-label {
            color: #aaa;
            font-weight: 600;
        }

        .stat-value {
            color: #48dbfb;
            font-weight: 700;
        }

        .info-section {
            max-width: 1400px;
            margin: 0 auto;
            padding: 40px 20px 60px;
        }

        .info-section h2 {
            text-align: center;
            color: #ff6b6b;
            font-size: 2em;
            margin-bottom: 40px;
        }

        .stage-cards {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 25px;
        }

        .stage-card {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 107, 107, 0.2);
            border-radius: 12px;
            padding: 25px;
            transition: all 0.3s ease;
        }

        .stage-card:hover {
            transform: translateY(-5px);
            border-color: #ff6b6b;
            box-shadow: 0 10px 30px rgba(255, 107, 107, 0.2);
        }

        .stage-card h3 {
            color: #ff6b6b;
            margin-bottom: 15px;
            font-size: 1.4em;
        }

        .stage-card p {
            color: #ccc;
            line-height: 1.7;
            margin-bottom: 15px;
        }

        .particle-info {
            background: rgba(254, 202, 87, 0.1);
            padding: 12px;
            border-radius: 8px;
            border-left: 3px solid #feca57;
            font-size: 0.9em;
        }

        .particle-info strong {
            color: #feca57;
        }

        @media (max-width: 1200px) {
            .controls-section {
                grid-template-columns: 1fr;
                gap: 20px;
            }
        }

        @media (max-width: 768px) {
            .header h1 {
                font-size: 2em;
            }

            #canvas-container {
                height: 400px;
            }

            .stage-cards {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>Supernova Explosion Simulator</h1>
        <p>Witness the most powerful explosion in the universe</p>
    </div>

    <div id="canvas-container"></div>

    <div class="controls-section">
        <div class="control-panel">
            <h3>Controls</h3>
            <button class="control-btn btn-start" onclick="startExplosion()">Start Supernova</button>
            <button class="control-btn btn-pause" onclick="togglePause()">Pause</button>
            <button class="control-btn btn-reset" onclick="resetSimulation()">Reset</button>

            <div class="speed-control">
                <label>Simulation Speed</label>
                <input type="range" id="speedSlider" min="0.1" max="5" step="0.1" value="1">
                <div class="speed-value" id="speedValue">1.0x</div>
            </div>
        </div>

        <div class="stage-indicator">
            <h3>Current Stage</h3>
            <div class="current-stage" id="stageIndicator">Massive Star (Stable)</div>
            <div class="stage-description" id="stageDescription">
                A massive star burns steadily for millions of years. Nuclear fusion keeps it stable, balancing gravity with radiation pressure.
            </div>
        </div>

        <div class="stats-panel">
            <h3>Statistics</h3>
            <div class="stat-row">
                <span class="stat-label">Temperature</span>
                <span class="stat-value" id="tempStat">15M K</span>
            </div>
            <div class="stat-row">
                <span class="stat-label">Energy Released</span>
                <span class="stat-value" id="energyStat">0 × 10⁴⁴ J</span>
            </div>
            <div class="stat-row">
                <span class="stat-label">Expansion Speed</span>
                <span class="stat-value" id="speedStat">0 km/s</span>
            </div>
        </div>
    </div>

    <div class="info-section">
        <h2>Supernova Evolution Stages</h2>

        <div class="stage-cards">
            <div class="stage-card">
                <h3>1. Massive Star</h3>
                <p>A star at least 8 times more massive than our Sun burns steadily for millions of years. Nuclear fusion in the core keeps it stable, balancing gravity with outward pressure.</p>
                <div class="particle-info">
                    <strong>Core:</strong> Iron nucleus forming (end of fusion cycle)
                </div>
            </div>

            <div class="stage-card">
                <h3>2. Core Collapse</h3>
                <p>When the core runs out of fuel, iron cannot fuse further. Without energy support, the core collapses catastrophically in less than a second under its own gravity.</p>
                <div class="particle-info">
                    <strong>Speed:</strong> Core collapses at 70,000 km/s (23% speed of light)
                </div>
            </div>

            <div class="stage-card">
                <h3>3. Neutron Star Formation</h3>
                <p>The collapsing core becomes incredibly dense, crushing protons and electrons into neutrons. This creates a neutron star - one of the densest objects in the universe.</p>
                <div class="particle-info">
                    <strong>Density:</strong> 1 teaspoon weighs 6 billion tons
                </div>
            </div>

            <div class="stage-card">
                <h3>4. Shock Wave</h3>
                <p>The collapse suddenly halts, creating a massive rebound shock wave that travels outward at tremendous speed, heating material to billions of degrees.</p>
                <div class="particle-info">
                    <strong>Temperature:</strong> 100 billion Kelvin
                </div>
            </div>

            <div class="stage-card">
                <h3>5. Explosion</h3>
                <p>The shock wave tears through the star's outer layers in a spectacular explosion, releasing more energy in seconds than the Sun will in its entire 10-billion-year lifetime.</p>
                <div class="particle-info">
                    <strong>Energy:</strong> 10⁴⁴ Joules (1 Foe)
                </div>
            </div>

            <div class="stage-card">
                <h3>6. Remnant & Nebula</h3>
                <p>The explosion leaves behind a neutron star or black hole at the center, surrounded by an expanding cloud of stellar debris that seeds the universe with heavy elements.</p>
                <div class="particle-info">
                    <strong>Legacy:</strong> Creates elements like gold, silver, uranium
                </div>
            </div>
        </div>
    </div>

    <script>
        const scene = new THREE.Scene();
        const camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 5000);
        const renderer = new THREE.WebGLRenderer({ antialias: true, alpha: false });
        
        const container = document.getElementById('canvas-container');
        renderer.setSize(container.clientWidth, container.clientHeight);
        container.appendChild(renderer.domElement);

        camera.position.z = 300;

        const ambientLight = new THREE.AmbientLight(0x333333);
        scene.add(ambientLight);

        const pointLight = new THREE.PointLight(0xffffff, 2, 1000);
        scene.add(pointLight);

        function createStarfield() {
            const geometry = new THREE.BufferGeometry();
            const vertices = [];
            for (let i = 0; i < 5000; i++) {
                vertices.push(
                    Math.random() * 2000 - 1000,
                    Math.random() * 2000 - 1000,
                    Math.random() * 2000 - 1000
                );
            }
            geometry.setAttribute('position', new THREE.Float32BufferAttribute(vertices, 3));
            const material = new THREE.PointsMaterial({ color: 0xffffff, size: 1 });
            const stars = new THREE.Points(geometry, material);
            scene.add(stars);
        }
        createStarfield();

        const starGeometry = new THREE.SphereGeometry(50, 64, 64);
        const starMaterial = new THREE.MeshPhongMaterial({
            color: 0xff6b6b,
            emissive: 0xff4444,
            emissiveIntensity: 0.8
        });
        const star = new THREE.Mesh(starGeometry, starMaterial);
        scene.add(star);

        const glowGeometry = new THREE.SphereGeometry(60, 32, 32);
        const glowMaterial = new THREE.MeshBasicMaterial({
            color: 0xff6b6b,
            transparent: true,
            opacity: 0.3
        });
        const glow = new THREE.Mesh(glowGeometry, glowMaterial);
        scene.add(glow);

        let explosionParticles = [];
        let shockWave = null;
        let neutronStar = null;
        let explosionStage = 0;
        let explosionProgress = 0;
        let animationSpeed = 1;
        let isPaused = false;
        let isExploding = false;

        const stageDescriptions = {
            0: "A massive star burns steadily for millions of years. Nuclear fusion keeps it stable, balancing gravity with radiation pressure.",
            1: "The iron core can no longer produce energy through fusion. Gravity overwhelms the star and the core collapses at 23% the speed of light.",
            2: "The core compresses to incredible density, forming a neutron star. Protons and electrons are crushed together into neutrons.",
            3: "The collapse rebounds, sending a massive shock wave outward. Temperatures reach 100 billion Kelvin as the wave accelerates.",
            4: "The shock wave tears through the outer layers in a spectacular explosion visible across galaxies. Elements heavier than iron are forged.",
            5: "An expanding nebula surrounds the neutron star remnant. This stellar debris will seed future generations of stars and planets."
        };

        function createExplosionParticles() {
            const particleCount = 2000;
            const geometry = new THREE.BufferGeometry();
            const positions = [];
            const colors = [];
            const velocities = [];

            for (let i = 0; i < particleCount; i++) {
                positions.push(0, 0, 0);

                const theta = Math.random() * Math.PI * 2;
                const phi = Math.random() * Math.PI;
                const speed = Math.random() * 3 + 1;
                
                velocities.push(
                    Math.sin(phi) * Math.cos(theta) * speed,
                    Math.sin(phi) * Math.sin(theta) * speed,
                    Math.cos(phi) * speed
                );

                const t = Math.random();
                if (t < 0.33) {
                    colors.push(1, 0.2, 0.2);
                } else if (t < 0.66) {
                    colors.push(1, 0.5, 0);
                } else {
                    colors.push(1, 1, 0.2);
                }
            }

            geometry.setAttribute('position', new THREE.Float32BufferAttribute(positions, 3));
            geometry.setAttribute('color', new THREE.Float32BufferAttribute(colors, 3));
            geometry.setAttribute('velocity', new THREE.Float32BufferAttribute(velocities, 3));

            const material = new THREE.PointsMaterial({
                size: 3,
                vertexColors: true,
                transparent: true,
                opacity: 0.8,
                blending: THREE.AdditiveBlending
            });

            const particles = new THREE.Points(geometry, material);
            scene.add(particles);
            explosionParticles.push(particles);
        }

        function createShockWave() {
            const geometry = new THREE.SphereGeometry(50, 32, 32);
            const material = new THREE.MeshBasicMaterial({
                color: 0x00ffff,
                transparent: true,
                opacity: 0.3,
                wireframe: true
            });
            shockWave = new THREE.Mesh(geometry, material);
            scene.add(shockWave);
        }

        function createNeutronStar() {
            const geometry = new THREE.SphereGeometry(10, 32, 32);
            const material = new THREE.MeshPhongMaterial({
                color: 0x00ffff,
                emissive: 0x0088ff,
                emissiveIntensity: 1
            });
            neutronStar = new THREE.Mesh(geometry, material);
            scene.add(neutronStar);
        }

        function updateStage(stage, text) {
            document.getElementById('stageIndicator').textContent = text;
            document.getElementById('stageDescription').textContent = stageDescriptions[stage] || stageDescriptions[0];
            explosionStage = stage;
        }

        function updateStats(temp, energy, speed) {
            document.getElementById('tempStat').textContent = temp;
            document.getElementById('energyStat').textContent = energy;
            document.getElementById('speedStat').textContent = speed;
        }

        function startExplosion() {
            if (isExploding) return;
            isExploding = true;
            explosionProgress = 0;
            explosionStage = 1;
            updateStage(1, 'Core Collapse');
        }

        function togglePause() {
            isPaused = !isPaused;
            const btn = document.querySelector('.btn-pause');
            btn.textContent = isPaused ? 'Resume' : 'Pause';
        }

        function resetSimulation() {
            isExploding = false;
            isPaused = false;
            explosionProgress = 0;
            explosionStage = 0;
            
            star.scale.set(1, 1, 1);
            star.material.emissiveIntensity = 0.8;
            star.visible = true;
            glow.visible = true;
            
            explosionParticles.forEach(p => scene.remove(p));
            explosionParticles = [];
            if (shockWave) scene.remove(shockWave);
            if (neutronStar) scene.remove(neutronStar);
            shockWave = null;
            neutronStar = null;
            
            updateStage(0, 'Massive Star (Stable)');
            updateStats('15M K', '0 × 10⁴⁴ J', '0 km/s');
            document.querySelector('.btn-pause').textContent = 'Pause';
        }

        document.getElementById('speedSlider').addEventListener('input', (e) => {
            animationSpeed = parseFloat(e.target.value);
            document.getElementById('speedValue').textContent = animationSpeed.toFixed(1) + 'x';
        });

        function animate() {
            requestAnimationFrame(animate);

            if (!isPaused && isExploding) {
                explosionProgress += 0.01 * animationSpeed;

                if (explosionProgress < 1 && explosionStage === 1) {
                    star.scale.set(1 - explosionProgress * 0.3, 1 - explosionProgress * 0.3, 1 - explosionProgress * 0.3);
                    star.material.emissiveIntensity = 0.8 + explosionProgress * 0.5;
                    updateStats(`${15 + Math.floor(explosionProgress * 85)}M K`, '0 × 10⁴⁴ J', `${Math.floor(explosionProgress * 70000)} km/s`);
                    
                    if (explosionProgress >= 0.9) {
                        updateStage(2, 'Neutron Star Formation');
                        createNeutronStar();
                    }
                }
                else if (explosionProgress >= 1 && explosionProgress < 2 && explosionStage === 2) {
                    const t = explosionProgress - 1;
                    if (!shockWave) createShockWave();
                    shockWave.scale.set(1 + t * 2, 1 + t * 2, 1 + t * 2);
                    shockWave.material.opacity = 0.5 - t * 0.2;
                    updateStats('100B K', `${(t * 5).toFixed(1)} × 10⁴⁴ J`, '10,000 km/s');
                    
                    if (t >= 0.8) {
                        updateStage(3, 'Shock Wave');
                        createExplosionParticles();
                        star.visible = false;
                        glow.visible = false;
                    }
                }
                else if (explosionProgress >= 2 && explosionProgress < 5 && explosionStage === 3) {
                    const t = explosionProgress - 2;
                    
                    explosionParticles.forEach(particles => {
                        const positions = particles.geometry.attributes.position.array;
                        const velocities = particles.geometry.attributes.velocity.array;
                        
                        for (let i = 0; i < positions.length; i += 3) {
                            positions[i] += velocities[i] * animationSpeed;
                            positions[i + 1] += velocities[i + 1] * animationSpeed;
                            positions[i + 2] += velocities[i + 2] * animationSpeed;
                        }
                        particles.geometry.attributes.position.needsUpdate = true;
                        particles.material.opacity = Math.max(0, 0.8 - t * 0.2);
                    });
                    
                    if (shockWave) {
                        shockWave.scale.set(3 + t * 5, 3 + t * 5, 3 + t * 5);
                        shockWave.material.opacity = Math.max(0, 0.3 - t * 0.1);
                    }
                    
                    updateStats(`${Math.floor(100 - t * 20)}B K`, '10 × 10⁴⁴ J', `${Math.floor(30000 - t * 5000)} km/s`);
                    
                    if (t >= 2.5) {
                        updateStage(4, 'Massive Explosion');
                    }
                }
                else if (explosionProgress >= 5) {
                    updateStage(5, 'Supernova Remnant');
                    updateStats('1M K', '10 × 10⁴⁴ J', '5,000 km/s');
                }
            }

            if (star.visible) star.rotation.y += 0.005;
            if (neutronStar) neutronStar.rotation.y += 0.1;
            if (shockWave) {
                shockWave.rotation.x += 0.01;
                shockWave.rotation.y += 0.01;
            }

            renderer.render(scene, camera);
        }

        window.addEventListener('resize', () => {
            const width = container.clientWidth;
            const height = container.clientHeight;
            camera.aspect = width / height;
            camera.updateProjectionMatrix();
            renderer.setSize(width, height);
        });

        animate();
    </script>
</body>
</html>